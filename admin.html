<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Panel - Aiss Hosting</title>
  <style>
    body {
      background-color: #0e0e0e;
      color: #00ff88;
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #00ffaa;
    }

    .user-card {
      background-color: #1b1b1b;
      border-radius: 10px;
      padding: 15px 20px;
      margin-bottom: 15px;
      box-shadow: 0 0 10px rgba(0,255,136,0.2);
    }

    .user-card strong {
      color: #fff;
    }

    .delete-btn, .update-btn {
      margin-top: 10px;
      padding: 8px 15px;
      background-color: #ff4444;
      color: white;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }

    .update-btn {
      background-color: #ffaa00;
      margin-left: 10px;
    }

    .update-btn:hover {
      background-color: #ffcc00;
    }

    .delete-btn:hover {
      background-color: #ff0000;
    }

    input[type="text"] {
      padding: 6px;
      border: none;
      border-radius: 6px;
      margin-top: 5px;
      width: 100%;
      box-sizing: border-box;
      margin-bottom: 5px;
      background-color: #2b2b2b;
      color: #fff;
    }

    .back-link {
      display: inline-block;
      margin-top: 30px;
      color: #00ffaa;
      text-decoration: none;
    }

    .empty-msg {
      text-align: center;
      color: #888;
      margin-top: 40px;
    }
  </style>
</head>
<body>
  <h1>üîê Admin Panel - Data User</h1>

  <div id="userList"></div>

  <div style="text-align: center;">
    <a class="back-link" href="menugame.html">‚Üê Kembali ke Menu</a>
  </div>

  <script>
    const currentUser = localStorage.getItem("currentUser");
    if (currentUser !== "aris") {
      alert("Akses ditolak! Halaman hanya untuk admin.");
      window.location.href = "login.html";
    }

    let users = JSON.parse(localStorage.getItem("users") || "{}");
    const userList = document.getElementById("userList");

    function renderUsers() {
      userList.innerHTML = "";

      const userEntries = Object.entries(users);
      if (userEntries.length === 0) {
        userList.innerHTML = "<p class='empty-msg'>Tidak ada user terdaftar.</p>";
        return;
      }

      userEntries.forEach(([username, data]) => {
        if (username === "admin") return; // Jangan tampilkan admin

        const card = document.createElement("div");
        card.className = "user-card";

        card.innerHTML = `
          <p>üë§ <strong>${username}</strong></p>
          <p>üîë Password: ${data.password || '-'}</p>
          <p>üì± Nomor HP: ${data.phone || '-'}</p>
          <input type="text" placeholder="Password baru" id="newPw-${username}" />
          <button class="update-btn" onclick="updatePassword('${username}')">üîÑ Ubah Password</button>
          <button class="delete-btn" onclick="deleteUser('${username}')">‚ùå Hapus User</button>
        `;

        userList.appendChild(card);
      });
    }

    function updatePassword(username) {
      const input = document.getElementById(`newPw-${username}`);
      const newPw = input.value.trim();
      if (!newPw) {
        alert("Password baru tidak boleh kosong!");
        return;
      }

      users[username].password = newPw;
      localStorage.setItem("users", JSON.stringify(users));
      alert(`Password untuk ${username} telah diperbarui.`);
      renderUsers();
    }

    function deleteUser(username) {
      if (confirm(`Yakin ingin menghapus user "${username}"?`)) {
        delete users[username];
        localStorage.setItem("users", JSON.stringify(users));
        renderUsers();
      }
    }

    renderUsers();
  </script>
</body>
</html>